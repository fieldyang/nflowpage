{"code":"import { __awaiter } from \"tslib\";\r\nimport { NNode } from \"./nnode\";\r\nimport { Renderer } from \"nodom3\";\r\nexport class NModuleNode extends NNode {\r\n    constructor(cfg, process) {\r\n        super(cfg, process);\r\n        this.path = cfg.path;\r\n    }\r\n    run() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!this.module) {\r\n                yield this.getModule();\r\n            }\r\n            this.module.setContainer(this.process.container);\r\n            this.process.setCurrentNode(this);\r\n            //加入渲染队列\r\n            Renderer.add(this.module);\r\n        });\r\n    }\r\n    /**\r\n     * 获取模块\r\n     */\r\n    getModule() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const m = yield import(this.path);\r\n            //通过import的模块，查找模块类\r\n            for (let k of Object.keys(m)) {\r\n                if (m[k].name) {\r\n                    module = m[k];\r\n                    break;\r\n                }\r\n            }\r\n            this.module = module;\r\n        });\r\n    }\r\n}\r\n//# sourceMappingURL=nmodulenode.js.map","references":["/Users/leiyang/develop/codework/jswork/npageflow/core/node/nnode.ts","/Users/leiyang/develop/codework/jswork/npageflow/core/types.ts","/Users/leiyang/develop/codework/jswork/npageflow/core/npageprocess.ts","/Users/leiyang/develop/codework/jswork/npageflow/node_modules/nodom3/index.ts"],"map":"{\"version\":3,\"file\":\"nmodulenode.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../core/node/nmodulenode.ts\"],\"names\":[],\"mappings\":\";AAAA,OAAO,EAAE,KAAK,EAAE,MAAM,SAAS,CAAC;AAGhC,OAAO,EAAE,QAAQ,EAAE,MAAM,QAAQ,CAAC;AAElC,MAAM,OAAO,WAAY,SAAQ,KAAK;IAWlC,YAAY,GAAS,EAAC,OAAoB;QACtC,KAAK,CAAC,GAAG,EAAC,OAAO,CAAC,CAAC;QACnB,IAAI,CAAC,IAAI,GAAG,GAAG,CAAC,IAAI,CAAC;IACzB,CAAC;IAEK,GAAG;;YACL,IAAG,CAAC,IAAI,CAAC,MAAM,EAAC;gBACZ,MAAM,IAAI,CAAC,SAAS,EAAE,CAAC;aAC1B;YACD,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;YACjD,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;YAClC,QAAQ;YACR,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAC9B,CAAC;KAAA;IAED;;OAEG;IACG,SAAS;;YACX,MAAM,CAAC,GAAG,MAAM,MAAM,CAAE,IAAI,CAAC,IAAI,CAAC,CAAC;YACnC,mBAAmB;YACnB,KAAI,IAAI,CAAC,IAAI,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,EAAC;gBACxB,IAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,EAAC;oBACT,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;oBACd,MAAM;iBACT;aACJ;YACD,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACzB,CAAC;KAAA;CACJ\"}","dts":{"name":"/Users/leiyang/develop/codework/jswork/npageflow/node_modules/.cache/rollup-plugin-typescript2/placeholder/core/node/nmodulenode.d.ts","writeByteOrderMark":false,"text":"import { NNode } from \"./nnode\";\r\nimport { INode } from \"../types\";\r\nimport { NPageProcess } from \"../npageprocess\";\r\nexport declare class NModuleNode extends NNode {\r\n    /**\r\n     * 模块路径\r\n     */\r\n    path: string;\r\n    /**\r\n     * 模块对象\r\n     */\r\n    module: any;\r\n    constructor(cfg: INode, process: NPageProcess);\r\n    run(): Promise<void>;\r\n    /**\r\n     * 获取模块\r\n     */\r\n    getModule(): Promise<void>;\r\n}\r\n"}}
