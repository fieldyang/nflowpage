{"code":"import { __awaiter } from \"tslib\";\r\nimport { NNode } from \"./nnode\";\r\n/**\r\n * 并行网关\r\n */\r\nexport class NInclusiveNode extends NNode {\r\n    constructor(cfg, process) {\r\n        super(cfg, process);\r\n        this.outSequences = this.process.getSequenceNodes(this.name);\r\n        this.inSequences = this.process.getSequenceNodes(this.name, true);\r\n        if (!this.outSequences || this.outSequences.length === 0 || !this.inSequences || this.inSequences.length === 0) {\r\n            throw `节点'${this.name}'配置错误!`;\r\n        }\r\n        this.inCount = this.inSequences.length;\r\n    }\r\n    run() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            //执行一次，则计数器-1，到0时，表示网关可以进行下一步\r\n            if (--this.inCount === 0) {\r\n                for (let node of this.outSequences) {\r\n                    node.run();\r\n                }\r\n            }\r\n        });\r\n    }\r\n}\r\n//# sourceMappingURL=ninclusivenode.js.map","references":["/Users/leiyang/develop/codework/jswork/npageflow/core/node/nnode.ts","/Users/leiyang/develop/codework/jswork/npageflow/core/types.ts","/Users/leiyang/develop/codework/jswork/npageflow/core/node/nsequencenode.ts","/Users/leiyang/develop/codework/jswork/npageflow/core/npageprocess.ts"],"map":"{\"version\":3,\"file\":\"ninclusivenode.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../core/node/ninclusivenode.ts\"],\"names\":[],\"mappings\":\";AAAA,OAAO,EAAE,KAAK,EAAE,MAAM,SAAS,CAAC;AAKhC;;GAEG;AACH,MAAM,OAAO,cAAe,SAAQ,KAAK;IAarC,YAAY,GAAS,EAAC,OAAoB;QACtC,KAAK,CAAC,GAAG,EAAC,OAAO,CAAC,CAAC;QACnB,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC7D,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,EAAC,IAAI,CAAC,CAAC;QACjE,IAAG,CAAC,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,YAAY,CAAC,MAAM,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,WAAW,CAAC,MAAM,KAAK,CAAC,EAAC;YAC1G,MAAM,MAAM,IAAI,CAAC,IAAI,QAAQ,CAAC;SACjC;QACD,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;IAC3C,CAAC;IAEK,GAAG;;YACL,6BAA6B;YAC7B,IAAG,EAAE,IAAI,CAAC,OAAO,KAAK,CAAC,EAAC;gBACpB,KAAI,IAAI,IAAI,IAAI,IAAI,CAAC,YAAY,EAAC;oBAC9B,IAAI,CAAC,GAAG,EAAE,CAAC;iBACd;aACJ;QACL,CAAC;KAAA;CACJ\"}","dts":{"name":"/Users/leiyang/develop/codework/jswork/npageflow/node_modules/.cache/rollup-plugin-typescript2/placeholder/core/node/ninclusivenode.d.ts","writeByteOrderMark":false,"text":"import { NNode } from \"./nnode\";\r\nimport { INode } from \"../types\";\r\nimport { NSecquenceNode } from \"./nsequencenode\";\r\nimport { NPageProcess } from \"../npageprocess\";\r\n/**\r\n * 并行网关\r\n */\r\nexport declare class NInclusiveNode extends NNode {\r\n    outSequences: NSecquenceNode[];\r\n    inSequences: NSecquenceNode[];\r\n    /**\r\n     * 出口顺序流\r\n     */\r\n    sequences: NSecquenceNode[];\r\n    /**\r\n     * 执行剩余数量\r\n     */\r\n    inCount: number;\r\n    constructor(cfg: INode, process: NPageProcess);\r\n    run(): Promise<void>;\r\n}\r\n"}}
